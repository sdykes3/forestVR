<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Navigator.Geolocation and A-Frame</title>
    <meta name="description" content="VR Forest New">
    <script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
    <!--component used for text-->
    <script src="https://rawgit.com/bryik/aframe-bmfont-text-component/master/dist/aframe-bmfont-text-component.min.js"></script>
  </head>
  <body>

    <a-scene id="3dScene">

      <!-- 0. Art assets -->
      <a-assets>
        <img id="aquarium" src="panoramas/aqui.jpg">
        <img id="century" src="panoramas/cent.jpg">
        <img id="piedmont" src="panoramas/pied.jpg">
        <img id="museum" src="panoramas/high.jpg">
        <img id="woc" src="panoramas/woc.jpg">
        <img id="forestPano" src="https://sdykes3.github.io/forestVR/my-img/trees.jpg">
        <img id="clearPano" src="https://sdykes3.github.io/forestVR/my-img/clearing.jpg">
        <img id="creekPano" src="https://sdykes3.github.io/forestVR/my-img/creek.jpg">
        <audio id="forestSound" src="https://sdykes3.github.io/forestVR/my-img/forestBest.wav"></audio>
        <audio id="streamSound" src="https://sdykes3.github.io/forestVR/my-img/streamBest.wav"></audio>

        <a-asset-item id="tree1" src="https://sdykes3.github.io/forestVR/my-img/models/Tree Type3 04.dae"></a-asset-item>
      </a-assets>



      <!-- Sound, either click or auto -->
      <!-- <a-sphere id="soundObject" onclick="playSound()" position="-5 3 -3" radius="0.5" color="#EF2D5E" opacity="1"></a-sphere> -->
      <a-entity id="soundObject" sound="src: #forestSound; autoplay: true" position="-5 3 -3"></a-entity>



      <!-- Test click disappearing -->
      <a-sphere onclick="disappear()" position="-5 3 -3" radius="0.5" color="#EF2D5E" opacity="1"></a-sphere>
      
      

      <!-- 1. Tree objects -->
      <a-entity id="treeStuff" visible="false">
        <a-entity collada-model="#tree1" position="0 0 0"></a-entity>
        <a-entity collada-model="#tree1" position="6 -1 -4"></a-entity>
        <a-entity collada-model="#tree1" position="13 -1 7" scale="3 3 3" rotation="0 90 0"></a-entity>
      </a-entity>

      <!-- 1. Creek objects -->
      <a-entity id="creekStuff" visible="true">
        <a-entity collada-model="#tree1" position="-6 -1 -4"></a-entity>
        <a-entity collada-model="#tree1" position="6 -1 14"></a-entity>
        <a-entity collada-model="#tree1" position="13 -1 7" scale="3 3 3" rotation="0 90 0"></a-entity>
        <a-entity collada-model="#tree1" position="-15 -1 7" scale="3 3 3" rotation="0 90 0"></a-entity>
      </a-entity>


      <!-- 1. The Hello World primitives. -->
      <!--I've added id's, animations, and some extra properties -->

      <a-entity id="primitiveStuff">
        <a-sphere id="sphere1" position="0 1.25 -1" radius="1.25" color="#EF2D5E" opacity="1">
              <a-animation id="sphere1Anim" attribute="position"
                           begin="move!"
                           end="stop!"
                           from="0 1.25 -1"
                           to="0 5.25 -1"
                           dur="4000"
                           repeat="indefinite"
                           direction="alternate">
             </a-animation>
        </a-sphere>
        <a-box id="box1" position="-1 0.5 1" rotation="0 45 0" width="1" height="1" depth="1"  color="#4CC3D9">
          <a-animation id="box1Anim" attribute="opacity"
                                 begin="fade!"
                                 end="stop!"
                                 delay="0"
                                 dur="900"
                                 ease="linear"
                                 from="0"
                                 to="1"
                                 repeat="indefinite"
                                 direction="alternate">
          </a-animation>
        </a-box>
        <a-cylinder id="cyl1" position="1 0.75 1" radius="0.5" height="1.5" color="#FFC65D" opacity="1">
        </a-cylinder>
        <!-- A spinning ball , spinning around an empty entity-->
        <a-entity position="1 0.75 1" rotation="0 10 0">
              <a-animation id="spinBallAnim" attribute="rotation"
                                   begin="move!"
                                   end="stop!"
                                   delay="0"
                                   dur="1000"
                                   to="0 10 360"
                                   repeat="indefinite"
                                   easing="linear">
              </a-animation>
              <a-sphere id="spinBall" visible="false" position="0 3 0" radius="0.3" color="green">
              </a-sphere>
        </a-entity>
        <a-plane id="plane1" rotation="-90 0 0" width="4"
                 height="4" color="#7BC8A4">
        </a-plane>
      </a-entity> <!-- End primitiveStuff -->





      <!-- 2. Left and Right text, and debug text.-->
      <a-text id="locationText" text="The location text will appear here, on the left."
              color="#FF0080" position="-6 0 0" rotation= "0 60 0" scale="2 2 2" width="270" align="left">
      </a-text>

      <a-text id="progressText" text="The progress text will appear here, on the right."
               color="yellow" position="2.5 0 0" rotation= "0 -60 0" scale="1.5 1.5 1.5" width="270" align="right">
      </a-text>

      <a-text id="debugText" text="The current distance will be displayed here."
               color="green" position="-2 3.5 0" rotation= "0 0 0" scale="1.5 1.5 1.5" width="600" align="center">
      </a-text>





      <!--Where the panoramas would appear -->
      <a-sky id="pano" src="#forestPano" color="white"></a-sky>




      <!--The cursor-->
      <a-entity position="0 0 3.8">
             <a-camera>
                 <a-cursor color="#359763"
                   fuse="true" >
                   <a-animation begin="fusing" easing="ease-in" attribute="material.color"
                               fill="forwards" from="#2E3A87" to="white" dur="1500"></a-animation>
                  <a-animation begin="click" easing="ease-in" attribute="material.color"
                               fill="forwards" from="white" to="#2E3A87" dur="150"></a-animation>
             </a-cursor>
             </a-camera>
      </a-entity>

      <!--For the cursor: if you want the cursor to be bigger-->
      <!-- geometry="primitive: ring; radiusOuter: 0.10;
               radiusInner: 0.05;" -->
    </a-scene>

    <!--including scripts -->
    <script src="circleDistanceScript.js"></script>
    <script src="sceneControllerVariables.js"></script>
    <script src="sceneControllerFunctions.js"></script>
    <script src="sceneControllerStart.js"></script>

    <script>
        function playSound() {
            document.getElementById("soundObject").setAttribute("color", "blue");
            console.log("TOUCHED");

            var audio = new Audio('https://sdykes3.github.io/forestVR/my-img/forestBest.wav');
            audio.play();
        }

        function disappear() {
            console.log("disappear");

            sphereAnimElement.emit("move!");
            boxAnimElement.emit("fade!");
            panoElement.setAttribute("src", "#forestPano");
            cylElement.setAttribute('color', 'pink');

            rightText.setAttribute('text', "LOCATION 1");
            document.getElementById("treeStuff").setAttribute("visible", "true");
        }
    </script>

  </body>
</html>
